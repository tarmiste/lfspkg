# Maintainer: tba
# THIS PKGBUILD IS AN UNTESTED PROTOTYPE.  USE AT OWN RISK
#
# EDITHOOK1
#

BLFSTOOLSEQ=005
pkgname=pcre
pkgver=8.41
pkgrel=1
# EDITHOOK2
pkgdesc=""
arch=('x86_64')
# EDITHOOK3
url=""
license=('GPL')
groups=()
# EDITHOOK4
depends=()
makedepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=()
install=
changelog=
# EDITHOOK5
source=(
    https://downloads.sourceforge.net/pcre/pcre-8.41.tar.bz2
)
# EDITHOOK6
noextract=()
# EDITHOOK7

md5sums=('c160d22723b1670447341b08c58981c1')

# EDITHOOKPREP
prepare() {
	cd "$pkgname-$pkgver"
	./configure --prefix=/usr                     \
            --docdir=/usr/share/doc/pcre-8.41 \
            --enable-unicode-properties       \
            --enable-pcre16                   \
            --enable-pcre32                   \
            --enable-pcregrep-libz            \
            --enable-pcregrep-libbz2          \
            --enable-pcretest-libreadline     \
            --disable-static               
}

# EDITHOOKBLD
build() {
	cd "$pkgname-$pkgver"
	make
}

# EDITHOOKCHK
check() {
	cd "$pkgname-$pkgver"
	make -k check
}

# EDITHOOKPKG
package() {
	cd "$pkgname-$pkgver"
	make -j1 DESTDIR="$pkgdir/" install
	install -vdm755 "${pkgdir}/lib"
	mv -v "${pkgdir}"/usr/lib/libpcre.so.* "${pkgdir}/lib"
	ln -sfv ../../lib/$(readlink "${pkgdir}/usr/lib/libpcre.so") \
          "${pkgdir}/usr/lib/libpcre.so"
}
# EDITHOOKC
#######  Building package
